(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{214:function(e,t,n){},215:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var a,c,r,o,s,i,l,d,u,h,j,b,f,g,O=n(0),p=n.n(O),m=n(43),x=n.n(m),y=n(45),k=(n(214),n(17)),S=n(18),C=n(23),v=n(22),I=(n(215),n(305)),P=(n(216),n(74)),T=n(316),D=n(317),w=n(320),M=n(321),F=n(322),V=n(53),E=n(5),K=P.a.SubMenu,z=function(e){Object(C.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={theme:"dark",current:"1"},e.changeTheme=function(t){e.setState({theme:t?"dark":"light"})},e.handleClick=function(t){console.log("click ",t),e.setState({current:t.key})},e.logout=function(){document.cookie="authToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href="http://localhost:8081/"},e}return Object(S.a)(n,[{key:"render",value:function(){return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(P.a,{theme:this.state.theme,onClick:this.handleClick,style:{width:250,height:"100%"},defaultOpenKeys:["sub1"],selectedKeys:[this.state.current],mode:"inline",children:[Object(E.jsxs)(K,{icon:Object(E.jsx)(w.a,{}),title:"Manage",children:[Object(E.jsx)(P.a.Item,{children:Object(E.jsx)(V.b,{to:"/",children:"New Orders"})},"1"),Object(E.jsx)(P.a.Item,{children:Object(E.jsx)(V.b,{to:"/processed",children:"Processed Orders"})},"2"),Object(E.jsx)(P.a.Item,{children:Object(E.jsx)(V.b,{to:"/products",children:"Products"})},"3"),Object(E.jsx)(P.a.Item,{children:Object(E.jsx)(V.b,{to:"/featuredproduct",children:"Featured Product"})},"4"),Object(E.jsx)(P.a.Item,{children:Object(E.jsx)(V.b,{to:"/deals",children:"Deals"})},"13"),Object(E.jsx)(P.a.Item,{children:Object(E.jsx)(V.b,{to:"/categories",children:"Categories"})},"17")]},"sub1"),Object(E.jsxs)(K,{icon:Object(E.jsx)(M.a,{}),title:"Apps",children:[Object(E.jsx)(P.a.Item,{children:"Razorpay"},"6"),Object(E.jsx)(P.a.Item,{children:"Facebook Chat"},"9")]},"sub2"),Object(E.jsx)(T.a,{checked:"dark"===this.state.theme,onChange:this.changeTheme,style:{margin:"20px"},checkedChildren:"Dark",unCheckedChildren:"Light"}),Object(E.jsx)("br",{}),Object(E.jsx)(P.a.Item,{onClick:this.logout,children:Object(E.jsxs)(D.b,{children:["Logout",Object(E.jsx)(F.a,{})]})},"14")]})})}}]),n}(O.Component),A=n(1),L=n(307),N=n(205),U=n(313),R=n(40),B=n(306),q=n(88),Y=n.n(q),H=(n(103),n(169)),W=n(323),J=n(324),Q=L.a.RangePicker,G=[],X=[],Z=function(e){Object(C.a)(n,e);var t=Object(v.a)(n);function n(e){var c;return Object(k.a)(this,n),(c=t.call(this,e)).dataFetch=function(e,t){console.log("datafetch"),X=[],a.collection("Orders").where("timestamp",">=",t).where("timestamp","<=",e).where("status","==","processed").onSnapshot((function(e){e.forEach((function(e){X.push(Object(A.a)(Object(A.a)({},e.data()),{},{docId:e.id})),console.log(X)})),c.setState({ordersData:X})}))},c.handleSort=function(){2!==G.length?N.b.error("Please select a date range!"):(c.dataFetch(G[1],G[0]),0===X.length&&c.setState({ordersData:[]})),console.log("handlesort",G)},c.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,a=t.selectedKeys,r=t.confirm,o=t.clearFilters;return Object(E.jsxs)("div",{style:{padding:8},children:[Object(E.jsx)(U.a,{ref:function(e){c.searchInput=e},placeholder:"Search ".concat(e),value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return c.handleSearch(a,r,e)},style:{marginBottom:8,display:"block"}}),Object(E.jsxs)(D.b,{children:[Object(E.jsx)(R.a,{type:"primary",onClick:function(){return c.handleSearch(a,r,e)},icon:Object(E.jsx)(H.a,{}),size:"small",style:{width:90},children:"Search"}),Object(E.jsx)(R.a,{onClick:function(){return c.handleReset(o)},size:"small",style:{width:90},children:"Reset"}),Object(E.jsx)(R.a,{type:"link",size:"small",onClick:function(){r({closeDropdown:!1}),c.setState({searchText:a[0],searchedColumn:e})},children:"Filter"})]})]})},filterIcon:function(e){return Object(E.jsx)(H.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return c.searchInput.select()}),100)},render:function(t){return c.state.searchedColumn===e?Object(E.jsx)(Y.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[c.state.searchText],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}},c.handleSearch=function(e,t,n){t(),c.setState({searchText:e[0],searchedColumn:n})},c.handleReset=function(e){e(),c.setState({searchText:""})},c.state={searchText:"",searchedColumn:"",ordersData:[],sortDate:[]},c}return Object(S.a)(n,[{key:"componentDidMount",value:function(){a=y.a.firestore();var e=new Date(Date.now()-864e5),t=new Date(Date.now()),n=Date.parse(t)/1e3,c=Date.parse(e)/1e3;console.log(c,e),console.log(n,t),this.dataFetch(n,c),console.log("data ",this.state.ordersData)}},{key:"onChange",value:function(e,t){console.log("Selected Time: ",e),console.log("Formatted Selected Time: ",t),G.length=0,t.forEach((function(e){console.log("parsed date",Date.parse(e)),G.push(Date.parse(e)/1e3)})),console.log("Time Range: ",G)}},{key:"onOk",value:function(e){console.log("onOk: ",e)}},{key:"render",value:function(){var e=this,t=[Object(A.a)({title:"Name",dataIndex:"name",key:"name",width:"30%"},this.getColumnSearchProps("name")),{title:"Order Time (mm/dd/yyyy) ",dataIndex:"timestamp",key:"timestamp",width:"20%",sorter:function(e,t){return e.timestamp.length-t.timestamp.length},sortDirections:["descend","ascend"],render:function(e){return Object(E.jsx)("p",{children:new Date(1e3*e).toLocaleString()})}},{title:"Address",dataIndex:"address",key:"address"},Object(A.a)({title:"Payment Id",dataIndex:"paymentId",key:"paymentId"},this.getColumnSearchProps("paymentId")),{title:"Print Invoice",dataIndex:"address",key:"address",render:function(e,t){return Object(E.jsx)(V.b,{to:{pathname:"/invoice",state:t},children:Object(E.jsx)(R.a,{type:"primary",shape:"round",icon:Object(E.jsx)(W.a,{}),size:"default",children:"Print"})})}}];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Q,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:this.onChange,onOk:this.onOk,style:{marginBottom:"25px"}}),Object(E.jsx)(R.a,{onClick:function(){return e.handleSort()},type:"primary",icon:Object(E.jsx)(J.a,{}),size:"default",children:"Sort"}),Object(E.jsx)(B.a,{columns:t,dataSource:this.state.ordersData})]})}}]),n}(O.Component),$=n(7),_=n(301),ee=n(158),te=n(314),ne=n(168),ae=[],ce="",re="",oe="",se=function(){return Object(E.jsx)(U.a,{placeholder:"Enter tracking number",onChange:function(e){console.log("changed",e.target.value),r=e.target.value}})},ie=function(e){Object(C.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).dataFetch=function(){console.log("datafetch"),ae=[],c.collection("Orders").where("status","==","unprocessed").get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data()),ae.push(Object(A.a)(Object(A.a)({},e.data()),{},{docId:e.id})),console.log(ae)}))})).then((function(){a.setState({ordersData:ae}),console.log(a.state.ordersData)})).catch((function(e){console.log("Error getting documents: ",e)}))},a.markProcessed=function(e){var t="",n="";c.collection("Orders").doc(e).update({status:"processed"}).then((function(){""!=re||null!==re||void 0!==re?c.collection("Users").doc(re).get().then((function(e){e.exists?(console.log("Document data:",e.data()),n=e.data(),(t=n[oe]).status=1,c.collection("Users").doc(re).update(Object($.a)({},oe,t)).then((function(){N.b.success("Order marked processed!"),a.setState({loading:!1}),a.dataFetch()}))):(a.setState({loading:!1}),console.log("No such document!"))})).catch((function(e){a.setState({loading:!1}),console.log("Error getting document:",e)})):(console.log("no user specified"),N.b.success("Order marked processed!"),a.setState({loading:!1}),a.dataFetch())}))},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,c=t.selectedKeys,r=t.confirm,o=t.clearFilters;return Object(E.jsxs)("div",{style:{padding:8},children:[Object(E.jsx)(U.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:c[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(c,r,e)},style:{marginBottom:8,display:"block"}}),Object(E.jsxs)(D.b,{children:[Object(E.jsx)(R.a,{type:"primary",onClick:function(){return a.handleSearch(c,r,e)},icon:Object(E.jsx)(H.a,{}),size:"small",style:{width:90},children:"Search"}),Object(E.jsx)(R.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90},children:"Reset"}),Object(E.jsx)(R.a,{type:"link",size:"small",onClick:function(){r({closeDropdown:!1}),a.setState({searchText:c[0],searchedColumn:e})},children:"Filter"})]})]})},filterIcon:function(e){return Object(E.jsx)(H.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}),100)},render:function(t){return a.state.searchedColumn===e?Object(E.jsx)(Y.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleOk=function(){null===r||void 0===r?N.b.error("Please enter tracking Id"):(a.setState({isModalVisible:!1,loading:!0}),a.markProcessed(ce),console.log("userOrder",oe))},a.state={searchText:"",searchedColumn:"",ordersData:[],sortDate:[],isModalVisible:!1,loading:!1},a}return Object(S.a)(n,[{key:"confirm",value:function(e,t,n){console.log("done"),ce=e,re=t,oe=n,this.setState({isModalVisible:!0})}},{key:"cancel",value:function(){console.log("clicked cancel")}},{key:"componentDidMount",value:function(){var e=this;c=y.a.firestore(),this.dataFetch(),console.log("data ",this.state.ordersData),c.collection("Orders").onSnapshot((function(){console.log("calling data fetch"),e.dataFetch()}))}},{key:"render",value:function(){var e=this,t=[Object(A.a)({title:"Name",dataIndex:"name",key:"name",width:"30%"},this.getColumnSearchProps("name")),{title:"Order Time (mm/dd/yyyy)",dataIndex:"timestamp",key:"timestamp",width:"20%",sorter:function(e,t){return e.timestamp.length-t.timestamp.length},sortDirections:["descend","ascend"],render:function(e){return Object(E.jsx)("p",{children:new Date(1e3*e).toLocaleString()})}},{title:"Address",dataIndex:"address",key:"address"},Object(A.a)({title:"Payment Id",dataIndex:"paymentId",key:"paymentId"},this.getColumnSearchProps("paymentId")),{title:"Mark Processed",dataIndex:"docId",key:"docId",render:function(t,n){return Object(E.jsxs)(_.a,{title:"Are you sure to mark this order as processed?",onConfirm:function(){return e.confirm(t,n.user,n.paymentId)},onCancel:function(){return e.cancel()},okText:"Yes",cancelText:"No",children:[" ",Object(E.jsx)(R.a,{type:"primary",shape:"round",icon:Object(E.jsx)(ne.a,{}),size:"default",children:"Processed"})]})}},{title:"Print Invoice",dataIndex:"address",key:"address",render:function(e,t){return Object(E.jsx)(V.b,{to:{pathname:"/invoice",state:{address:e,order:t.orders,name:t.name,number:t.number,email:t.email,id:t.paymentId,date:t.timestamp,prices:t.prices,taxes:t.taxes}},children:Object(E.jsx)(R.a,{type:"primary",shape:"round",icon:Object(E.jsx)(W.a,{}),size:"default",children:"Print"})})}}];return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(ee.a,{spinning:this.state.loading,children:[Object(E.jsx)(te.a,{title:"Enter Tracking Number",visible:this.state.isModalVisible,onOk:function(){return e.handleOk()},onCancel:function(){return e.setState({isModalVisible:!1})},children:Object(E.jsx)(se,{})}),Object(E.jsx)(B.a,{columns:t,dataSource:this.state.ordersData})]})})}}]),n}(O.Component),le=n(13),de=n(131),ue=n(312),he=n(325),je=["Street Light"],be=de.a.Option,fe=[],ge="",Oe=function(){return Object(E.jsx)(ue.a,{min:1,onChange:function(e){console.log("changed",e),s=e}})},pe=function(){return Object(E.jsx)(de.a,{mode:"tags",style:{width:"100%"},onChange:function(e){console.log("changed",e),i=e},tokenSeparators:[","],children:je.map((function(e){return Object(E.jsx)(be,{children:e},e)}))})},me=function(e){Object(C.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={searchText:"",searchedColumn:"",productData:[],loading:!1,isPriceModalVisible:!1,isOfferModalVisible:!1,isTaxModalVisible:!1,isTagsModalVisible:!1,ischargesKeralaModalVisible:!1,ischargesOtherModalVisible:!1},e.dataFetch=function(){console.log("datafetch"),o.collection("products").get().then((function(t){fe=[],t.forEach((function(t){fe.push(Object(A.a)(Object(A.a)({},t.data()),{},{docId:t.id})),console.log(fe),console.log(e.state.productData)})),e.setState({productData:fe}),e.forceUpdate()})).catch((function(e){console.log("Error getting documents: ",e)}))},e.getColumnSearchProps=function(t){return{filterDropdown:function(n){var a=n.setSelectedKeys,c=n.selectedKeys,r=n.confirm,o=n.clearFilters;return Object(E.jsxs)("div",{style:{padding:8},children:[Object(E.jsx)(U.a,{ref:function(t){e.searchInput=t},placeholder:"Search ".concat(t),value:c[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return e.handleSearch(c,r,t)},style:{marginBottom:8,display:"block"}}),Object(E.jsxs)(D.b,{children:[Object(E.jsx)(R.a,{type:"primary",onClick:function(){return e.handleSearch(c,r,t)},icon:Object(E.jsx)(H.a,{}),size:"small",style:{width:90},children:"Search"}),Object(E.jsx)(R.a,{onClick:function(){return e.handleReset(o)},size:"small",style:{width:90},children:"Reset"}),Object(E.jsx)(R.a,{type:"link",size:"small",onClick:function(){r({closeDropdown:!1}),e.setState({searchText:c[0],searchedColumn:t})},children:"Filter"})]})]})},filterIcon:function(e){return Object(E.jsx)(H.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,n){return n[t]?n[t].toString().toLowerCase().includes(e.toLowerCase()):""},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){return e.searchInput.select()}),100)},render:function(n){return e.state.searchedColumn===t?Object(E.jsx)(Y.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchText],autoEscape:!0,textToHighlight:n?n.toString():""}):n}}},e.markAvailable=function(t){o.collection("products").doc(t).update({status:!0}).then((function(){N.b.success("Product marked Available"),e.dataFetch(),e.setState({loading:!1})}))},e.markUnavailable=function(t){o.collection("products").doc(t).update({status:!1}).then((function(){N.b.success("Product marked Unavailable"),e.dataFetch(),e.setState({loading:!1})}))},e.handleSearch=function(t,n,a){n(),e.setState({searchText:t[0],searchedColumn:a})},e.handleReset=function(t){t(),e.setState({searchText:""})},e.handlePriceChange=function(t,n){ge=t,console.log("docToBeEdited",ge),"price"===n&&e.setState({isPriceModalVisible:!0}),"offer"===n&&e.setState({isOfferModalVisible:!0}),"tax"===n&&e.setState({isTaxModalVisible:!0}),"chargesKerala"===n&&e.setState({ischargesKeralaModalVisible:!0}),"chargesOther"===n&&e.setState({ischargesOtherModalVisible:!0})},e.handlePriceOk=function(){null===s?N.b.error("Please enter a price!"):(e.setState({loading:!0,isPriceModalVisible:!1}),console.log(s),o.collection("products").doc(ge).update({price:s}).then((function(){N.b.success("Product price updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleOfferOk=function(){null===s?N.b.error("Please enter a number!"):(e.setState({loading:!0,isOfferModalVisible:!1}),console.log(s),o.collection("products").doc(ge).update({offer:s}).then((function(){N.b.success("Offer updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleTaxOk=function(){null===s?N.b.error("Please enter a number!"):(e.setState({loading:!0,isTaxModalVisible:!1}),console.log(s),o.collection("products").doc(ge).update({tax:s}).then((function(){N.b.success("Tax Percentage updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleChargesKeralaOk=function(){null===s?N.b.error("Please enter a number!"):(e.setState({loading:!0,ischargesKeralaModalVisible:!1}),console.log(s),o.collection("products").doc(ge).update({chargesKerala:s}).then((function(){N.b.success("Delivery Charge Updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleChargesOtherOk=function(){null===s?N.b.error("Please enter a number!"):(e.setState({loading:!0,ischargesOtherModalVisible:!1}),console.log(s),o.collection("products").doc(ge).update({chargesOther:s}).then((function(){N.b.success("Tax Percentage updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleTagsChanged=function(t,n){e.setState({isTagsModalVisible:!0}),l=Object(le.a)(n),ge=t},e.handleTagsOk=function(){l=[].concat(Object(le.a)(l),Object(le.a)(i)),console.log(l),0===i.length?N.b.error("Please enter a search tag!"):(e.setState({loading:!0,isTagsModalVisible:!1}),console.log(s),o.collection("products").doc(ge).update({tags:l}).then((function(){N.b.success("Tags added successfully"),e.dataFetch(),e.setState({loading:!1})})))},e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){o=y.a.firestore(),0===this.state.productData.length&&this.dataFetch()}},{key:"confirm",value:function(e,t){this.setState({loading:!0}),console.log("done"),e?this.markUnavailable(t):this.markAvailable(t)}},{key:"confirmDelete",value:function(e){var t=this;this.setState({loading:!0}),o.collection("products").doc(e).delete().then((function(){N.b.success("Product successfully deleted!"),t.setState({loading:!1}),t.dataFetch()})).catch((function(e){N.b.error("Error removing product: ",e),t.setState({loading:!1}),t.dataFetch()}))}},{key:"cancel",value:function(){console.log("clicked cancel")}},{key:"render",value:function(){var e=this,t=[Object(A.a)({title:"Name",dataIndex:"name",key:"name",width:"20%"},this.getColumnSearchProps("name")),{title:"Price",dataIndex:"price",key:"price",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"price")},size:"default",children:t})}},{title:"Offer",dataIndex:"offer",key:"offer",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"offer")},size:"default",children:t})}},{title:"Tax Percentage",dataIndex:"tax",key:"tax",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"tax")},size:"default",children:t})}},{title:"Delivery Charge in Kerala",dataIndex:"chargesKerala",key:"chargesKerala",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"chargesKerala")},size:"default",children:t})}},{title:"Delivery Charge outside Kerala",dataIndex:"chargesOther",key:"chargesOther",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"chargesOther")},size:"default",children:t})}},{title:"Add Search Tags",dataIndex:"tags",key:"tags",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handleTagsChanged(n.docId,t)},size:"default",children:"Add"})}},{title:"Status",dataIndex:"status",key:"docId",render:function(t,n){return Object(E.jsxs)(_.a,{title:t?"Are you sure to mark the product unavailable!?":"Are you sure to mark the product available!?",onConfirm:function(){return e.confirm(t,n.docId)},onCancel:function(){return e.cancel()},okText:"Yes",cancelText:"No",children:[" ",Object(E.jsx)(R.a,{shape:"round",size:"default",children:t?"Available":"Unavailable"})]})}},{title:"Delete",dataIndex:"docId",key:"docId",render:function(t){return Object(E.jsxs)(_.a,{title:"Are you sure to delete the product?",onConfirm:function(){return e.confirmDelete(t)},onCancel:function(){return e.cancel()},okText:"Yes",cancelText:"No",children:[" ",Object(E.jsx)(R.a,{danger:!0,shape:"round",size:"default",children:"Delete"})]})}}];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(V.b,{to:"/addproduct",children:Object(E.jsx)(R.a,{type:"primary",shape:"round",icon:Object(E.jsx)(he.a,{}),size:"large",style:{marginBottom:"25px"},children:"Add Product"})}),Object(E.jsxs)(ee.a,{spinning:this.state.loading,children:[Object(E.jsx)(te.a,{title:"Edit Price",visible:this.state.isPriceModalVisible,onOk:function(){return e.handlePriceOk()},onCancel:function(){return e.setState({isPriceModalVisible:!1})},children:Object(E.jsx)(Oe,{})}),Object(E.jsx)(te.a,{title:"Edit Offer",visible:this.state.isOfferModalVisible,onOk:function(){return e.handleOfferOk()},onCancel:function(){return e.setState({isOfferModalVisible:!1})},children:Object(E.jsx)(Oe,{})}),Object(E.jsx)(te.a,{title:"Edit Tax",visible:this.state.isTaxModalVisible,onOk:function(){return e.handleTaxOk()},onCancel:function(){return e.setState({isTaxModalVisible:!1})},children:Object(E.jsx)(Oe,{})}),Object(E.jsx)(te.a,{title:"Add Search Tags",visible:this.state.isTagsModalVisible,onOk:function(){return e.handleTagsOk()},onCancel:function(){return e.setState({isTagsModalVisible:!1})},children:Object(E.jsx)(pe,{})}),Object(E.jsx)(te.a,{title:"Edit Delivery Charges",visible:this.state.ischargesKeralaModalVisible,onOk:function(){return e.handleChargesKeralaOk()},onCancel:function(){return e.setState({ischargesKeralaModalVisible:!1})},children:Object(E.jsx)(Oe,{})}),Object(E.jsx)(te.a,{title:"Edit Delivery Charges",visible:this.state.ischargesOtherModalVisible,onOk:function(){return e.handleChargesOtherOk()},onCancel:function(){return e.setState({ischargesOtherModalVisible:!1})},children:Object(E.jsx)(Oe,{})}),Object(E.jsx)(B.a,{columns:t,dataSource:this.state.productData})]})]})}}]),n}(O.Component),xe=n(12),ye=n(8),ke=n(309),Se=n(308),Ce=n(326),ve=(n(299),function(e){Object(C.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={fileList:[],uploading:!1,status:!1,error:!1},e.componentDidMount=function(){d=y.a.storage().ref()},e.handleUpload=function(){if(e.props.spinner(),e.setState({uploading:!0}),e.state.status)N.b.warning("Already uploaded");else{var t=e.state.fileList,n=new FormData;t.forEach((function(e){n.append("files[]",e)})),console.log("file list",t),t.forEach((function(n){if("image/jpeg"===n.type||"image/png"===n.type){var a=+new Date+"-"+n.name,c={contentType:n.type};d.child(a).put(n,c).then((function(e){return e.ref.getDownloadURL()})).then((function(a){console.log(a),e.props.addImages(a,t.length),N.b.success("Uploaded ".concat(n.name))})).catch((function(t){e.setState({uploading:!1,error:!0,status:!1}),N.b.warning(t)}))}else N.b.warning("Upload Only png or jpeg files")}))}e.setState({uploading:!1})},e}return Object(S.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.uploading,a=t.fileList,c=(t.status,{onRemove:function(t){e.setState((function(e){var n=e.fileList.indexOf(t),a=e.fileList.slice();return a.splice(n,1),{fileList:a}}))},beforeUpload:function(t){return e.setState((function(e){return{fileList:[].concat(Object(le.a)(e.fileList),[t])}})),!1},fileList:a});return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Se.a,Object(A.a)(Object(A.a)({},c),{},{children:Object(E.jsx)(R.a,{icon:Object(E.jsx)(Ce.a,{}),children:"Select File"})})),Object(E.jsx)(R.a,{type:"primary",onClick:this.handleUpload,disabled:0===a.length,style:{marginTop:16},children:n?"Uploading":"Start Upload"})]})}}]),n}(O.Component)),Ie=n(327),Pe=n(319),Te=["key","name","fieldKey"],De=de.a.Option,we=[],Me=["Street Light"],Fe=function(){var e=Object(O.useState)([]),t=Object(ye.a)(e,2),n=t[0];t[1];Object(O.useEffect)((function(){u=y.a.firestore()}),[]);var a=ke.a.useForm(),c=Object(ye.a)(a,1)[0],r=Object(O.useState)("large"),o=Object(ye.a)(r,2),s=o[0],i=o[1],l=Object(O.useState)(!1),d=Object(ye.a)(l,2),h=d[0],j=d[1],b=Object(O.useState)(!1),f=Object(ye.a)(b,2),g=f[0],p=f[1];return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(ke.a,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",initialValues:{size:"large"},form:c,onValuesChange:function(e){var t=e.size;i(t)},size:s,onFinish:function(e){if(we.length>0){console.log(e),p(!0);var t=e.searchTags.map((function(e){return e.toLowerCase()}));u.collection("products").doc(e.productName).set({category:e.category,description:e.description,imgUrl:we[0],name:e.productName,offer:e.offer,price:e.price,tax:e.tax,chargesKerala:e.chargesKerala,chargesOther:e.chargesOther,tags:t,images:we,status:!0}).then((function(e){N.b.success("Product added successfully!"),c.resetFields(),p(!1)})).catch((function(e){console.error("Error adding document: ",e),p(!1),N.b.warning("Error adding product: ",e)}))}else N.b.warning("Please wait for images to be uploaded")},children:[Object(E.jsx)(ke.a.Item,{label:"Name of Product",name:"productName",rules:[{required:!0}],children:Object(E.jsx)(U.a,{})}),Object(E.jsx)(ke.a.Item,{label:"Upload Images",name:"images",rules:[{required:!0}],children:Object(E.jsx)(ee.a,{spinning:h,children:Object(E.jsx)(ve,{addImages:function(e,t){console.log(t),we.push(e),we.length===t&&j(!1),console.log("urls ",we)},spinner:function(){j(!0)}})})}),Object(E.jsx)(ke.a.Item,{label:"Category",name:"category",rules:[{required:!0}],children:Object(E.jsx)(de.a,{children:n.map((function(e,t){return Object(E.jsx)(de.a.Option,{value:e,children:e})}))})}),Object(E.jsx)(ke.a.Item,{label:"Price",name:"price",rules:[{required:!0}],children:Object(E.jsx)(ue.a,{})}),Object(E.jsx)(ke.a.Item,{label:"Offer",name:"offer",rules:[{required:!0}],children:Object(E.jsx)(ue.a,{})}),Object(E.jsx)(ke.a.Item,{label:"Tax Percentage",name:"tax",rules:[{required:!0}],children:Object(E.jsx)(ue.a,{})}),Object(E.jsx)(ke.a.Item,{label:"Delivery Charge inside Kerala",name:"chargesKerala",rules:[{required:!0}],children:Object(E.jsx)(ue.a,{})}),Object(E.jsx)(ke.a.Item,{label:"Delivery Charge outside Kerala",name:"chargesOther",rules:[{required:!0}],children:Object(E.jsx)(ue.a,{})}),Object(E.jsx)(ke.a.List,{name:"description",children:function(e,t){var n=t.add,a=t.remove;return Object(E.jsxs)(E.Fragment,{children:[e.map((function(e){var t=e.key,n=e.name,c=e.fieldKey,r=Object(xe.a)(e,Te);return Object(E.jsxs)(D.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(E.jsx)(ke.a.Item,Object(A.a)(Object(A.a)({},r),{},{name:[n,"specName"],fieldKey:[c,"specName"],rules:[{required:!0,message:"Missing specification name"}],children:Object(E.jsx)(U.a,{placeholder:"Spec Name"})})),Object(E.jsx)(ke.a.Item,Object(A.a)(Object(A.a)({},r),{},{name:[n,"specInfo"],fieldKey:[c,"specInfo"],rules:[{required:!0,message:"Missing specification"}],children:Object(E.jsx)(U.a,{placeholder:"Specification"})})),Object(E.jsx)(Ie.a,{onClick:function(){return a(n)}})]},t)})),Object(E.jsx)(ke.a.Item,{children:Object(E.jsx)(R.a,{type:"dashed",onClick:function(){return n()},block:!0,icon:Object(E.jsx)(Pe.a,{}),children:"Add field"})})]})}}),Object(E.jsx)(ke.a.Item,{label:"Youtube Video Id",name:"youtubeVideoId",rules:[{required:!0}],children:Object(E.jsx)(U.a,{})}),Object(E.jsx)(ke.a.Item,{label:"Search Tags",name:"searchTags",rules:[{required:!0}],children:Object(E.jsx)(de.a,{mode:"tags",style:{width:"100%"},onChange:function(e){console.log("selected ".concat(e))},tokenSeparators:[","],children:Me.map((function(e){return Object(E.jsx)(De,{children:e},e)}))})}),Object(E.jsx)(ke.a.Item,{children:Object(E.jsx)(ee.a,{spinning:g,children:Object(E.jsx)(R.a,{type:"primary",htmlType:"submit",icon:Object(E.jsx)(he.a,{}),children:"Add"})})})]})})},Ve=n(318),Ee=n(310),Ke=["Street Light"],ze=de.a.Option,Ae=[],Le=[],Ne=function(){var e=Object(O.useState)(!1),t=Object(ye.a)(e,2),n=t[0],a=t[1],c=Object(O.useState)(!1),r=Object(ye.a)(c,2),o=r[0],s=r[1],i=Object(O.useState)(!1),l=Object(ye.a)(i,2),d=l[0],u=l[1],b=Object(O.useState)(!1),f=Object(ye.a)(b,2),g=f[0],p=f[1],m=Object(O.useState)([]),x=Object(ye.a)(m,2),k=x[0],S=x[1],C=function(){console.log("datafetch"),j.collection("featuredProduct").get().then((function(e){h=[],e.forEach((function(e){h.push(Object(A.a)(Object(A.a)({},e.data()),{},{docId:e.id})),console.log(h)})),S(h)})).catch((function(e){console.log("Error getting documents: ",e)}))};Object(O.useEffect)((function(){j=y.a.firestore(),C()}),[]);var v=function(){console.log("Cancelled")};return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(ee.a,{spinning:g,children:[Object(E.jsx)(te.a,{title:"Add a Featured Product",visible:n,onOk:function(){0===Le.length?N.b.error("Please upload image !"):0===Ae.length?N.b.error("Please enter a search tag"):(console.log("tags",Ae),u(!0),j.collection("featuredProduct").add({imgUrl:Le[0],tags:Ae[0]}).then((function(e){N.b.success("Item added successfully!"),u(!1),a(!1),C()})).catch((function(e){u(!1),N.b.warning(e),a(!1)})))},confirmLoading:d,onCancel:function(){return a(!1)},children:Object(E.jsxs)(ee.a,{spinning:o,children:[Object(E.jsx)(ve,{addImages:function(e,t){console.log(t),Le.push(e),s(!1),console.log(Le[0])},spinner:function(){s(!0)}}),Object(E.jsx)("p",{style:{marginTop:"45px",fontWeight:"100"},children:"Search Tags"}),Object(E.jsx)(de.a,{mode:"tags",style:{marginTop:"5px",width:"100%"},onChange:function(e){console.log("selected ".concat(e)),Ae.push(e)},tokenSeparators:[","],children:Ke.map((function(e){return Object(E.jsx)(ze,{children:e},e)}))})]})}),Object(E.jsx)(R.a,{type:"primary",shape:"round",icon:Object(E.jsx)(he.a,{}),size:"large",style:{marginBottom:"25px"},onClick:function(){a(!0)},children:"Add"}),Object(E.jsx)(Ve.b,{itemLayout:"horizontal",dataSource:k,renderItem:function(e){return Object(E.jsx)(Ve.b.Item,{actions:[Object(E.jsx)(_.a,{title:"Are you sure to delete this item",onConfirm:function(){return t=e.docId,p(!0),void j.collection("featuredProduct").doc(t).delete().then((function(){N.b.success("Item successfully deleted!"),p(!1),C()})).catch((function(e){N.b.error("Error removing product: ",e),p(!1),C()}));var t},onCancel:function(){return v},okText:"Yes",cancelText:"No",children:Object(E.jsx)("a",{children:"delete"})})],children:Object(E.jsx)(Ee.a,{width:800,src:e.imgUrl})})}})]})})},Ue=n(201),Re=n.n(Ue),Be=n(311),qe=n(302),Ye=n(303),He=n(304),We=n(315),Je=[{title:"Description",dataIndex:"name",key:"name"},{title:"Qty",dataIndex:"qty",key:"qty"},{title:"Amount",dataIndex:"price",key:"price",render:function(e){return Object(E.jsxs)("p",{children:[" \u20b9",e]})}}],Qe=function(e){Object(C.a)(n,e);var t=Object(v.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"render",value:function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)(Be.a,{className:"site-page-header",title:"Invoice"}),Object(E.jsx)(qe.a,{}),Object(E.jsxs)(Ye.a,{style:{margin:"5px 45px"},children:[Object(E.jsx)(He.a,{span:12,children:Object(E.jsxs)(We.b,{size:"small",column:1,title:"From",children:[Object(E.jsx)(We.b.Item,{children:"Flygon Industrial Services"}),Object(E.jsxs)(We.b.Item,{children:["Industrial area, Angamaly South",Object(E.jsx)("br",{}),"Angamaly Po ,Ernakulam",Object(E.jsx)("br",{}),"Kerala, India 683572"]}),Object(E.jsx)(We.b.Item,{children:"9947228846  "}),Object(E.jsx)(We.b.Item,{children:"info@flygon.in"})]})}),Object(E.jsx)(He.a,{span:12,children:Object(E.jsxs)(We.b,{size:"small",column:1,title:"Bill To",children:[Object(E.jsx)(We.b.Item,{children:this.props.name}),Object(E.jsx)(We.b.Item,{children:this.props.address}),Object(E.jsx)(We.b.Item,{children:this.props.number}),Object(E.jsx)(We.b.Item,{children:this.props.email})]})})]}),Object(E.jsx)(qe.a,{}),Object(E.jsxs)(We.b,{size:"small",style:{margin:"5px 45px"},column:1,children:[Object(E.jsx)(We.b.Item,{label:"Invoice No",children:this.props.id}),Object(E.jsx)(We.b.Item,{label:"Date of issue",children:new Date(1e3*this.props.date).toLocaleDateString()})]}),Object(E.jsx)(qe.a,{}),Object(E.jsx)(B.a,{pagination:!1,style:{margin:"5px 45px"},dataSource:this.props.order,columns:Je}),Object(E.jsx)(qe.a,{}),Object(E.jsxs)(We.b,{size:"small",style:{margin:"2px 45px"},column:1,children:[Object(E.jsxs)(We.b.Item,{label:"Subtotal",children:["\u20b9 ",this.props.totalPrice-this.props.totalTax]}),Object(E.jsxs)(We.b.Item,{label:"Tax",children:["\u20b9 ",this.props.totalTax]}),Object(E.jsxs)(We.b.Item,{label:"Invoice Total",children:["\u20b9 ",this.props.totalPrice]})]}),Object(E.jsx)(qe.a,{}),Object(E.jsxs)(We.b,{size:"small",style:{margin:"2px 45px"},column:1,title:"Shipping Address",children:[Object(E.jsx)(We.b.Item,{children:this.props.name}),Object(E.jsx)(We.b.Item,{children:this.props.address}),Object(E.jsx)(We.b.Item,{children:this.props.number}),Object(E.jsx)(We.b.Item,{children:this.props.email})]})]})}}]),n}(p.a.PureComponent),Ge=function(e){var t=Object(O.useRef)();console.log(e.location.state);var n=e.location.state,a=n.address,c=n.orders,r=n.name,o=n.number,s=n.email,i=n.paymentId,l=n.timestamp,d=n.prices,u=n.taxes;console.log(a,c);var h=[],j=0,b=0,f=Object.keys(c);return console.log(f),f.forEach((function(e){var t={name:e,qty:c[e],price:d[e],tax:u[e]};j+=d[e],b+=u[e],h.push(t)})),console.log("order:",h),Object(E.jsxs)("div",{children:[Object(E.jsx)(Re.a,{trigger:function(){return Object(E.jsx)(R.a,{type:"primary",shape:"round",icon:Object(E.jsx)(W.a,{})})},content:function(){return t.current}}),Object(E.jsx)(Qe,{address:a,order:h,totalPrice:j,totalTax:b,name:r,number:o,email:s,id:i,date:l,ref:t})]})},Xe=n(41),Ze=Object(O.createContext)(),$e=function(e){var t=e.order||[];console.log(t);var n=Object(O.useState)([]),a=Object(ye.a)(n,2),c=a[0],r=a[1];return Object(O.useEffect)((function(){r(t)}),[t]),Object(E.jsx)(Ze.Provider,{value:[c,r],children:e.children})},_e=de.a.Option,et=[],tt=[],nt=[],at="",ct="",rt="",ot=function(){return Object(E.jsx)(ue.a,{min:1,onChange:function(e){console.log("changed",e),f=e}})},st=function(e){return Object(E.jsx)(de.a,{style:{width:"100%"},onChange:function(e){console.log("changed",e),ct=e},children:e.names.map((function(e){return Object(E.jsx)(_e,{children:e},e)}))})},it=function(e){Object(C.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={searchText:"",searchedColumn:"",productData:[],loading:!1,isPriceModalVisible:!1,isOfferModalVisible:!1,isItemsModalVisible:!1,isTagsModalVisible:!1,ischargesKeralaModalVisible:!1,ischargesOtherModalVisible:!1},e.dataFetch=function(){console.log("datafetch"),b.collection("products").get().then((function(t){et=[],t.forEach((function(t){et.push(Object(A.a)(Object(A.a)({},t.data()),{},{docId:t.id})),console.log(et),console.log(e.state.productData)}))})).then((function(){nt=[],et.forEach((function(e){"Deals"===e.category&&nt.push(e),tt.push(e.name)})),e.setState({productData:nt}),e.forceUpdate()})).catch((function(e){console.log("Error getting documents: ",e)}))},e.getColumnSearchProps=function(t){return{filterDropdown:function(n){var a=n.setSelectedKeys,c=n.selectedKeys,r=n.confirm,o=n.clearFilters;return Object(E.jsxs)("div",{style:{padding:8},children:[Object(E.jsx)(U.a,{ref:function(t){e.searchInput=t},placeholder:"Search ".concat(t),value:c[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return e.handleSearch(c,r,t)},style:{marginBottom:8,display:"block"}}),Object(E.jsxs)(D.b,{children:[Object(E.jsx)(R.a,{type:"primary",onClick:function(){return e.handleSearch(c,r,t)},icon:Object(E.jsx)(H.a,{}),size:"small",style:{width:90},children:"Search"}),Object(E.jsx)(R.a,{onClick:function(){return e.handleReset(o)},size:"small",style:{width:90},children:"Reset"}),Object(E.jsx)(R.a,{type:"link",size:"small",onClick:function(){r({closeDropdown:!1}),e.setState({searchText:c[0],searchedColumn:t})},children:"Filter"})]})]})},filterIcon:function(e){return Object(E.jsx)(H.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,n){return n[t]?n[t].toString().toLowerCase().includes(e.toLowerCase()):""},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){return e.searchInput.select()}),100)},render:function(n){return e.state.searchedColumn===t?Object(E.jsx)(Y.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchText],autoEscape:!0,textToHighlight:n?n.toString():""}):n}}},e.handleSearch=function(t,n,a){n(),e.setState({searchText:t[0],searchedColumn:a})},e.handleReset=function(t){t(),e.setState({searchText:""})},e.handlePriceChange=function(t,n){at=t,console.log("docToBeEdited",at),"price"===n&&e.setState({isPriceModalVisible:!0}),"offer"===n&&e.setState({isOfferModalVisible:!0}),"tax"===n&&e.setState({isTaxModalVisible:!0}),"chargesKerala"===n&&e.setState({ischargesKeralaModalVisible:!0}),"chargesOther"===n&&e.setState({ischargesOtherModalVisible:!0})},e.handlePriceOk=function(){null===f?N.b.error("Please enter a price!"):(e.setState({loading:!0,isPriceModalVisible:!1}),console.log(f),b.collection("products").doc(at).update({price:f}).then((function(){N.b.success("Product price updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleOfferOk=function(){null===f?N.b.error("Please enter a number!"):(e.setState({loading:!0,isOfferModalVisible:!1}),console.log(f),b.collection("products").doc(at).update({offer:f}).then((function(){N.b.success("Offer updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleChargesKeralaOk=function(){null===f?N.b.error("Please enter a number!"):(e.setState({loading:!0,ischargesKeralaModalVisible:!1}),console.log(f),b.collection("products").doc(at).update({chargesKerala:f}).then((function(){N.b.success("Delivery Charge Updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleChargesOtherOk=function(){null===f?N.b.error("Please enter a number!"):(e.setState({loading:!0,ischargesOtherModalVisible:!1}),console.log(f),b.collection("products").doc(at).update({chargesOther:f}).then((function(){N.b.success("Tax Percentage updated"),e.dataFetch(),e.setState({loading:!1})})))},e.handleItemsOk=function(){null==ct?N.b.error("Please select an item"):(e.setState({loading:!0,isItemsModalVisible:!1}),et.forEach((function(e){e.name===ct&&((rt=e).category="Deals",console.log(rt))})),b.collection("products").add(rt).then((function(t){console.log("Document written with ID: ",t.id),N.b.success("Deal added successfully !"),e.dataFetch(),e.setState({loading:!1})})).catch((function(t){console.error("Error adding document: ",t),e.setState({loading:!1}),N.b.error(t)})))},e.showAddDeal=function(){console.log("called"),e.setState({isItemsModalVisible:!0})},e}return Object(S.a)(n,[{key:"componentDidMount",value:function(){b=y.a.firestore(),0===this.state.productData.length&&this.dataFetch()}},{key:"confirm",value:function(e,t){this.setState({loading:!0}),console.log("done"),e?this.markUnavailable(t):this.markAvailable(t)}},{key:"confirmDelete",value:function(e){var t=this;this.setState({loading:!0}),b.collection("products").doc(e).delete().then((function(){N.b.success("Product successfully deleted!"),t.setState({loading:!1}),t.dataFetch()})).catch((function(e){N.b.error("Error removing product: ",e),t.setState({loading:!1}),t.dataFetch()}))}},{key:"cancel",value:function(){console.log("clicked cancel")}},{key:"render",value:function(){var e=this,t=[Object(A.a)({title:"Name",dataIndex:"name",key:"name",width:"20%"},this.getColumnSearchProps("name")),{title:"Price",dataIndex:"price",key:"price",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"price")},size:"default",children:t})}},{title:"Offer",dataIndex:"offer",key:"offer",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"offer")},size:"default",children:t})}},{title:"Delivery Charge in Kerala",dataIndex:"chargesKerala",key:"chargesKerala",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"chargesKerala")},size:"default",children:t})}},{title:"Delivery Charge outside Kerala",dataIndex:"chargesOther",key:"chargesOther",render:function(t,n){return Object(E.jsx)(R.a,{shape:"round",onClick:function(){return e.handlePriceChange(n.docId,"chargesOther")},size:"default",children:t})}},{title:"Delete",dataIndex:"docId",key:"docId",render:function(t){return Object(E.jsxs)(_.a,{title:"Are you sure to delete the product?",onConfirm:function(){return e.confirmDelete(t)},onCancel:function(){return e.cancel()},okText:"Yes",cancelText:"No",children:[" ",Object(E.jsx)(R.a,{danger:!0,shape:"round",size:"default",children:"Delete"})]})}}];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(R.a,{type:"primary",shape:"round",icon:Object(E.jsx)(he.a,{}),size:"large",style:{marginBottom:"25px"},onClick:function(){e.showAddDeal()},children:"Add Deal"}),Object(E.jsxs)(ee.a,{spinning:this.state.loading,children:[Object(E.jsx)(te.a,{title:"Edit Price",visible:this.state.isPriceModalVisible,onOk:function(){return e.handlePriceOk()},onCancel:function(){return e.setState({isPriceModalVisible:!1})},children:Object(E.jsx)(ot,{})}),Object(E.jsx)(te.a,{title:"Edit Offer",visible:this.state.isOfferModalVisible,onOk:function(){return e.handleOfferOk()},onCancel:function(){return e.setState({isOfferModalVisible:!1})},children:Object(E.jsx)(ot,{})}),Object(E.jsx)(te.a,{title:"Edit Delivery Charges",visible:this.state.ischargesKeralaModalVisible,onOk:function(){return e.handleChargesKeralaOk()},onCancel:function(){return e.setState({ischargesKeralaModalVisible:!1})},children:Object(E.jsx)(ot,{})}),Object(E.jsx)(te.a,{title:"Edit Delivery Charges",visible:this.state.ischargesOtherModalVisible,onOk:function(){return e.handleChargesOtherOk()},onCancel:function(){return e.setState({ischargesOtherModalVisible:!1})},children:Object(E.jsx)(ot,{})}),Object(E.jsx)(te.a,{title:"Add Items",visible:this.state.isItemsModalVisible,onOk:function(){return e.handleItemsOk()},onCancel:function(){return e.setState({isItemsModalVisible:!1})},children:Object(E.jsx)(st,{names:tt})}),Object(E.jsx)(B.a,{columns:t,dataSource:this.state.productData})]})]})}}]),n}(O.Component),lt=(de.a.Option,[]),dt=function(){var e=Object(O.useState)(!1),t=Object(ye.a)(e,2),n=t[0],a=t[1],c=Object(O.useState)(!1),r=Object(ye.a)(c,2),o=r[0],s=r[1],i=Object(O.useState)(!1),l=Object(ye.a)(i,2),d=l[0],u=l[1],h=Object(O.useState)(!1),j=Object(ye.a)(h,2),b=j[0],f=j[1],p=Object(O.useState)(""),m=Object(ye.a)(p,2),x=m[0],k=m[1],S=Object(O.useState)({}),C=Object(ye.a)(S,2),v=C[0],I=C[1],P=Object(O.useState)([]),T=Object(ye.a)(P,2),D=T[0],w=T[1],M=function(){g.collection("category").doc("category").get().then((function(e){if(e.exists){console.log("Document data:",e.data());var t=Object.keys(e.data());I(e.data()),w(t)}else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))};Object(O.useEffect)((function(){g=y.a.firestore(),M()}),[]);var F=function(){console.log("Cancelled")};return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(ee.a,{spinning:b,children:[Object(E.jsx)(te.a,{title:"Add a new Category",visible:n,onOk:function(){return function(){if(0===lt.length)N.b.error("Please upload image !");else{if(0!==x.length)return u(!0),g.collection("category").doc("category").update(Object($.a)({},x,{image:lt[0],name:x})).then((function(){console.log("Document successfully updated!"),N.b.success("Category added successfully!"),u(!1),a(!1),M()})).catch((function(e){u(!1),N.b.warning(e),a(!1),console.error("Error updating document: ",e)}));N.b.error("Please enter the name of the category")}}()},confirmLoading:d,onCancel:function(){return a(!1)},children:Object(E.jsxs)(ee.a,{spinning:o,children:[Object(E.jsx)(ve,{addImages:function(e,t){console.log(t),lt.push(e),s(!1),console.log(lt[0])},spinner:function(){s(!0)}}),Object(E.jsx)("p",{style:{marginTop:"45px",fontWeight:"100"},children:"Category Name"}),Object(E.jsx)(U.a,{placeholder:"Enter name of the Category",onChange:function(e){k(e.target.value),console.log(e.target.value)}})]})}),Object(E.jsx)(R.a,{type:"primary",shape:"round",icon:Object(E.jsx)(he.a,{}),size:"large",style:{marginBottom:"25px"},onClick:function(){a(!0)},children:"Add"}),Object(E.jsx)(Ve.b,{itemLayout:"horizontal",dataSource:D,renderItem:function(e){return Object(E.jsxs)(Ve.b.Item,{actions:[Object(E.jsx)(_.a,{title:"Are you sure to delete this item",onConfirm:function(){return t=e,f(!0),void g.collection("products").where("category","==",t).get().then((function(e){if(0===e.length)return g.collection("category").doc("category").update(Object($.a)({},t,y.a.firestore.FieldValue.delete())).then((function(){N.b.success("Category successfully deleted!"),f(!1),M()})).catch((function(e){N.b.error("Error removing category: ",e),f(!1),M()}));N.b.error("Error removing category! Please remove all products belonging to this category"),f(!1)})).catch((function(e){console.log("Error getting documents: ",e)}));var t},onCancel:function(){return F},okText:"Yes",cancelText:"No",children:Object(E.jsx)("a",{children:"delete"})})],children:[Object(E.jsx)(Ee.a,{width:200,src:v[e].image}),Object(E.jsx)("h4",{children:e})]})}})]})})},ut=I.a.Sider,ht=I.a.Content,jt=function(e){Object(C.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={orders:[]},e}return Object(S.a)(n,[{key:"render",value:function(){return Object(E.jsx)($e,{order:this.state.orders,children:Object(E.jsx)(V.a,{children:Object(E.jsxs)(I.a,{children:[Object(E.jsx)(ut,{style:{width:"350px"},children:Object(E.jsx)(z,{})}),Object(E.jsx)(I.a,{style:{height:"100vh"},children:Object(E.jsx)(ht,{style:{margin:"26px 12vh",padding:24,minHeight:280},children:Object(E.jsxs)(Xe.c,{children:[Object(E.jsx)(Xe.a,{exact:!0,path:"/",component:ie}),Object(E.jsx)(Xe.a,{exact:!0,path:"/processed",component:Z}),Object(E.jsx)(Xe.a,{exact:!0,path:"/products",component:me}),Object(E.jsx)(Xe.a,{exact:!0,path:"/invoice",component:Ge}),Object(E.jsx)(Xe.a,{exact:!0,path:"/addproduct",component:Fe}),Object(E.jsx)(Xe.a,{exact:!0,path:"/featuredproduct",component:Ne}),Object(E.jsx)(Xe.a,{exact:!0,path:"/deals",component:it}),Object(E.jsx)(Xe.a,{exact:!0,path:"/categories",component:dt})]})})})]})})})}}]),n}(O.Component),bt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,328)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};y.a.initializeApp({apiKey:"AIzaSyB6wPkcErEvpAjCukapRmwI9STRM-pCf-s",authDomain:"flygon-2894d.firebaseapp.com",projectId:"flygon-2894d",storageBucket:"flygon-2894d.appspot.com",messagingSenderId:"128728646875",appId:"1:128728646875:web:d5fdb8b2e78f4c810a78fe",measurementId:"G-QPR1J8JK64"}),x.a.render(Object(E.jsx)(p.a.StrictMode,{children:Object(E.jsx)(jt,{})}),document.getElementById("root")),bt()}},[[298,1,2]]]);
//# sourceMappingURL=main.9cb329d9.chunk.js.map